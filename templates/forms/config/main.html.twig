{#
 # ---------------------------------------------------------------------
 # GLPI Inventory Plugin
 # Copyright (C) 2021 Teclib' and contributors.
 #
 # http://glpi-project.org
 #
 # based on FusionInventory for GLPI
 # Copyright (C) 2010-2021 by the FusionInventory Development Team.
 #
 # ---------------------------------------------------------------------
 #
 # LICENSE
 #
 # This file is part of GLPI Inventory Plugin.
 #
 # GLPI Inventory Plugin is free software: you can redistribute it and/or modify
 # it under the terms of the GNU Affero General Public License as published by
 # the Free Software Foundation, either version 3 of the License, or
 # (at your option) any later version.
 #
 # GLPI Inventory Plugin is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 # GNU Affero General Public License for more details.
 #
 # You should have received a copy of the GNU Affero General Public License
 # along with GLPI Inventory Plugin. If not, see <https://www.gnu.org/licenses/>.
 # ---------------------------------------------------------------------
 #}

{% import "components/form/fields_macros.html.twig" as fields %}

{% set no_header = true %}
<div class="asset">
    {{ include('components/form/header.html.twig', {'in_twig': true}) }}

    {% set rand = random() %}
    {% set params  = params ?? [] %}
    {% set target       = params['target'] ?? item.getFormURL() %}
    {% set withtemplate = params['withtemplate'] ?? '' %}
    {% set item_type = item.getType() %}
    {% set field_options = {'rand': rand} %}

    <div class="card-body d-flex flex-wrap">
        <div class="col-12 flex-column">
            <div class="d-flex flex-row flex-wrap flex-xl-nowrap">
                <div class="row flex-row align-items-start flex-grow-1">
                    <div class="row flex-row">
                        {{ fields.dropdownYesNo(
                            'ssl_only',
                            item.isFieldActive('ssl_only'),
                            __('SSL-only for agent', 'glpiinventory'),
                            field_options
                        ) }}

                        {{ fields.textField(
                            'agent_port',
                            item.getValue('agent_port'),
                            __('Agent port', 'glpiinventory'),
                            field_options
                        ) }}

                        {{ fields.dropdownNumberField(
                            'delete_task',
                            item.getValue('delete_task'),
                            __('Delete tasks logs after', 'glpiinventory'),
                            field_options|merge({
                                'min': 1,
                                'max': 240,
                                'unit' : 'day'
                            })
                        ) }}

                        {{ fields.dropdownYesNo(
                            'reprepare_job',
                            item.isFieldActive('reprepare_job'),
                            __('Re-prepare successful jobs', 'glpiinventory'),
                            field_options
                        ) }}

                        {{ fields.dropdownNumberField(
                            'wakeup_agent_max',
                            item.getValue('wakeup_agent_max'),
                            __('Maximum number of agents to wake up in a task', 'glpiinventory'),
                            field_options|merge({
                                'min': 1,
                                'max': 100
                            })
                        ) }}

                        {{ fields.dropdownYesNo(
                            'extradebug',
                            item.isFieldActive('extradebug'),
                            __('Extra-debug', 'glpiinventory'),
                            field_options
                        ) }}
                    </div> {# .row #}
                </div> {# .row #}
            </div> {# .flex-row #}
        </div>
    </div> {# .card-body #}

    {% if no_form_buttons is not defined or no_form_buttons == false %}
        {{ include('components/form/buttons.html.twig') }}
    {% endif %}

</div> {# .asset #}
