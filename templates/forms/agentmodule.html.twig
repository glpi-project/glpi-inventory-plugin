{#
 # ---------------------------------------------------------------------
 # GLPI Inventory Plugin
 # Copyright (C) 2021 Teclib' and contributors.
 #
 # http://glpi-project.org
 #
 # based on FusionInventory for GLPI
 # Copyright (C) 2010-2021 by the FusionInventory Development Team.
 #
 # ---------------------------------------------------------------------
 #
 # LICENSE
 #
 # This file is part of GLPI Inventory Plugin.
 #
 # GLPI Inventory Plugin is free software: you can redistribute it and/or modify
 # it under the terms of the GNU Affero General Public License as published by
 # the Free Software Foundation, either version 3 of the License, or
 # (at your option) any later version.
 #
 # GLPI Inventory Plugin is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 # GNU Affero General Public License for more details.
 #
 # You should have received a copy of the GNU Affero General Public License
 # along with GLPI Inventory Plugin. If not, see <https://www.gnu.org/licenses/>.
 # ---------------------------------------------------------------------
 #}

{% import "components/form/fields_macros.html.twig" as fields %}

<form method="POST" action="{{ form_url }}">
    <table class='tab_cadre_fixe'>
        <tr>
            <th>{{ __('Module', 'glpiinventory') }}</th>
            <th>{{ __('Activation (by default)', 'glpiinventory') }}</th>
            <th>{{ __('Exceptions', 'glpiinventory') }}</th>
        </tr>
{% for module in modules %}
        <tr>
            <td>{{ module.displayname }}</td>
            <td>
                {{ fields.checkboxField(
                    module.id ~ '_is_active',
                    module.is_active,
                    ''
                ) }}
            </td>
            <td>
                {{ fields.dropdownField(
                    'Agent',
                    module.id ~ '_exceptions',
                    module.exceptions,
                    '',
                    {
                        'multiple': true,
                        'no_label': true
                    }
                ) }}
            </td>
        </tr>
{% endfor %}
    </table>
    <div class="card-footer mx-n2 d-flex">
        <button type="submit" name="update" value="1" class="ms-auto btn btn-primary">
            <i class="ti ti-device-floppy"></i>
            <span>{{ _x('button', 'Update') }}</span>
        </button>
        {{ fields.hiddenField('_glpi_csrf_token', csrf_token()) }}
    </div>
</form>
